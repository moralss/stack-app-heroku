(function(e){function t(t){for(var o,n,i=t[0],u=t[1],c=t[2],l=0,h=[];l<i.length;l++)n=i[l],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&h.push(s[n][0]),s[n]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);p&&p(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,n=1;n<r.length;n++){var i=r[n];0!==s[i]&&(o=!1)}o&&(a.splice(t--,1),e=u(u.s=r[0]))}return e}var o={},n={1:0},s={1:0},a=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{2:"6c555f06",3:"3d476e67",4:"dcdf48cd",5:"059a94d9",6:"609fe337",7:"88985d85",8:"cae5e7b6"}[e]+".js"}function u(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={2:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var o="css/"+({}[e]||e)+"."+{2:"bba13c19",3:"31d6cfe0",4:"31d6cfe0",5:"31d6cfe0",6:"31d6cfe0",7:"31d6cfe0",8:"31d6cfe0"}[e]+".css",s=u.p+o,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===o||l===s))return t()}var h=document.getElementsByTagName("style");for(i=0;i<h.length;i++){c=h[i],l=c.getAttribute("data-href");if(l===o||l===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete n[e],p.parentNode.removeChild(p),r(a)},p.href=s;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){n[e]=0})));var o=s[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,r){o=s[e]=[t,r]}));t.push(o[2]=a);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var h=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(p);var r=s[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",h.name="ChunkLoadError",h.type=o,h.request=n,r[1](h)}s[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=o,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)u.d(r,o,function(t){return e[t]}.bind(null,o));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var p=l;a.push([0,0]),r()})({0:function(e,t,r){e.exports=r("2f39")},"0047":function(e,t,r){},"2f39":function(e,t,r){"use strict";r.r(t);r("e6cf"),r("5319"),r("7d6e"),r("e54f"),r("985d"),r("0047");var o=r("2b0e"),n=r("1f91"),s=r("42d2"),a=r("b05d"),i=r("e669"),u=r("f508"),c=r("2a19");o["a"].use(a["a"],{config:{notify:{timeout:1e3},loading:{spinnerColor:"secondary",spinner:"QSpinnerFacebook"}},lang:n["a"],iconSet:s["a"],components:{QSpinnerFacebook:i["a"]},plugins:{Loading:u["a"],Notify:c["a"]}});var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},h=[];const p={data(){return{}},methods:{postValue(e,t){return this.$q.loading.show(),this.$axios.post(e,t).then((e=>(this.$q.loading.hide(),e))).catch((e=>{this.$q.loading.hide(),this.showError(e)}))},getValues(e){return this.$q.loading.show(),this.$axios.get(e).then((e=>(this.$q.loading.hide(),e.data))).catch((e=>{this.$q.loading.hide(),this.showError(e)}))},putValue(e,t){return this.$q.loading.show(),this.$axios.put(e,t).then((e=>(this.$q.loading.hide(),e))).catch((e=>{this.$q.loading.hide(),this.showError(e)}))},buildErrorMessage(e){var t="";if(e)if(e.response&&e.response.data&&e.response.data.Message&&(t+=e.response.data.Message+"\n"),e.response)for(let r=0;r<e.response.data.length;r++){const o=e.response.data[r];t+=o.message+"\n"}else t=e.message?e.message:e;else t="There was an error";return t},showSuccess(e){this.$q.notify({message:e,color:"positive",icon:"done"})},showError(e){this.$q.notify({message:this.buildErrorMessage(e),color:"negative",icon:"error"})},logoutGlobal(){this.$fireAuth.signOut().then((()=>{}))}}};var d=r("c23d"),f=r.n(d),g={apiKey:"AIzaSyBwg6kDOZ-oVOywzR53mBzGEsI_cXf1TQY",authDomain:"buget-app-411e3.firebaseapp.com",databaseURL:"https://buget-app-411e3.firebaseio.com",projectId:"buget-app-411e3",storageBucket:"buget-app-411e3.appspot.com",messagingSenderId:"1005352395615",appId:"1:1005352395615:web:740de8f1e1ea61ec820cea",measurementId:"G-6NN1JNM7MY"};r("741f"),r("e71f"),r("ea7b"),r("588e");const m=f.a.initializeApp(g);o["a"].mixin(p);var b={name:"App",data(){return{}},computed:{isAuth(){return this.$store.getters.isAuthenticated},isSystemAuthenticated(){return this.$store.getters.isSystemAuthenticated}},created(){console.log("authenticated",this.isSystemAuthenticated),this.$fireAuth.onAuthStateChanged((e=>{e?!e.displayName&&this.$store.getters.name?e.updateProfile({displayName:this.$store.getters.name}).then((()=>{this.login(e)})):this.login(e):"action"!==this.$route.name&&(this.$store.dispatch("logoutUser"),"login"!==this.$route.name&&this.$router.replace("/login"),this.$store.dispatch("logout"))}))},methods:{login(e){e.getIdToken(!0).then((t=>{if(this.$store.dispatch("setFirebaseToken",t),this.isAuth||this.$store.dispatch("login",{uid:e.uid,emailVerified:e.emailVerified,email:e.email,photoURL:e.photoURL,displayName:e.displayName}),!this.isSystemAuthenticated)return this.$store.dispatch("authenticate").then((e=>{this.$router.replace("/")}))}))}},beforeCreate(){o["a"].prototype.$db=m.firestore(),o["a"].prototype.$fireAuth=m.auth(),o["a"].prototype.$storage=m.storage(),o["a"].prototype.$firebase=f.a}},y=b,v=r("2877"),w=Object(v["a"])(y,l,h,!1,null,null,null),k=w.exports,$=r("2f62"),A=r("8de1"),P=r("48ac"),S=r.n(P);o["a"].use($["a"]);const T=()=>({user:null,token:null,firebaseToken:null,systemUser:null});var j=new $["a"].Store({state:T(),getters:{isAuthenticated(e){return null!=e.user},user(e){return e.user},systemUserId(e){return e.systemUser.id},userToken(e){return e.token},firebaseToken(e){return e.firebaseToken},isAuth(){return null!=state.user},isSystemAuthenticated(e){return null!=e.token}},mutations:{login(e,t){e.user=t.user},setToken(e,t){e.token=t},setFirebaseToken(e,t){e.firebaseToken=t.token},setSystemUser(e,t){var r=S.a.decode(t);e.token=t,console.log("data",r,t),e.systemUser=r},logoutUser(e){Object.assign(e,T())},resetState(e){Object.assign(e,T())}},actions:{authenticate({commit:e}){return o["a"].prototype.$authAxios.get("auth").then((t=>(console.log("response",t),e("setToken",t.data),e("setSystemUser",t.data),t))).catch((e=>{throw console.log("error error error error",e),console.log(e.response),e}))},setToken({commit:e},t){e("setToken",{token:t})},setFirebaseToken({commit:e},t){e("setFirebaseToken",{token:t})},login({commit:e},t){e("login",{user:t})},logout({commit:e}){e("resetState")}},strict:!1,plugins:[Object(A["a"])()]}),q=r("8c4f");const O=[{path:"/",component:()=>Promise.all([r.e(0),r.e(6)]).then(r.bind(null,"713b")),meta:{requiresAuth:!0},children:[{path:"",component:()=>Promise.all([r.e(0),r.e(3)]).then(r.bind(null,"8b24"))},{path:"/setup",component:()=>Promise.all([r.e(0),r.e(4)]).then(r.bind(null,"1a59"))},{path:"/viewer",component:()=>Promise.all([r.e(0),r.e(8)]).then(r.bind(null,"f603"))}]},{component:()=>Promise.all([r.e(0),r.e(5)]).then(r.bind(null,"25b3")),path:"/",children:[{path:"/login",name:"login",component:()=>Promise.all([r.e(0),r.e(2)]).then(r.bind(null,"e37c")),beforeEnter(e,t,r){j.getters.isAuthenticated?r(""):r()}}]}];O.push({path:"*",component:()=>Promise.all([r.e(0),r.e(7)]).then(r.bind(null,"e51e"))});var E=O;o["a"].use(q["a"]);var x=function(){const e=new q["a"]({scrollBehavior:()=>({x:0,y:0}),routes:E,mode:"hash",base:""});return e.beforeEach(((e,t,r)=>{e.matched.some((e=>e.meta.requiresAuth))?j.getters.isAuthenticated?r():r({path:"/login"}):r()})),e},U=async function(){const e="function"===typeof j?await j({Vue:o["a"]}):j,t="function"===typeof x?await x({Vue:o["a"],store:e}):x;e.$router=t;const r={router:t,store:e,render:e=>e(k),el:"#q-app"};return{app:r,store:e,router:t}},N=r("bc3a"),_=r.n(N),C=_.a.create({baseURL:"http://localhost:5000/api"});function L(){C.interceptors.request.use((function(e){const t=j.getters.firebaseToken;return console.log('Bearer "welcome"',t),t&&(e.headers.Authorization=`Bearer ${t}`),e}),(function(e){return Promise.reject(e)})),C.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))}C.defaults.headers.get.Accepts="application/json";var V=async({Vue:e})=>{L(),e.prototype.$authAxios=C};function B(){_.a.interceptors.request.use((function(e){const t=j.getters.userToken;return console.log("tokentokentokentokentoken",t),t&&(e.headers.Authorization=`Bearer ${t}`),e}),(function(e){return Promise.reject(e)})),_.a.interceptors.response.use((function(e){return e}),(async function(e){if(!e.response||!e.response.config||401!==e.response.status)return Promise.reject(e);try{return await j.dispatch("authenticate"),e.config.headers.Authorization=j.state.accessToken,B(),_.a.request(e.config)}catch(e){return await j.dispatch("logout"),Promise.reject(e)}}))}_.a.defaults.baseURL="http://localhost:5000/api",_.a.defaults.headers.get.Accepts="application/json";var M=async({Vue:e})=>{B(),e.prototype.$axios=_.a};const I="";async function z(){const{app:e,store:t,router:r}=await U();let n=!1;const s=e=>{n=!0;const t=Object(e)===e?r.resolve(e).route.fullPath:e;window.location.href=t},a=window.location.href.replace(window.location.origin,""),i=[V,M];for(let c=0;!1===n&&c<i.length;c++)if("function"===typeof i[c])try{await i[c]({app:e,router:r,store:t,Vue:o["a"],ssrContext:null,redirect:s,urlPath:a,publicPath:I})}catch(u){return u&&u.url?void(window.location.href=u.url):void console.error("[Quasar] boot error:",u)}!0!==n&&new o["a"](e)}z()}});